ðŸ“‹ FINAL WORKPLAN - KMIT CLUBS HUB
Complete Feature Reference Document for Development

1. USER AUTHENTICATION & ONBOARDING

Actors: Student, Admin, Coordinator
1.1 Registration Flow
text

Status: pending â†’ otp_sent â†’ verified â†’ profile_complete

Steps:
1. User enters rollNumber (validates: ^[0-9]{2}[Bb][Dd][A-Za-z0-9]{6}$)
2. User enters email (ANY provider allowed - gmail, yahoo, etc.)
3. User enters password with requirements:
   - Minimum 8 characters
   - At least 1 uppercase, 1 lowercase, 1 number, 1 special char
   - Cannot contain rollNumber
   - Cannot be common password (123456, password, etc.)
4. Backend creates user with status: pending_otp
5. System sends 6-digit OTP to email (expires: 10 minutes)
6. Rate limiting: Max 3 OTP resends per hour
7. On OTP verification â†’ status: verified, role: [student]
8. User completes profile (name, department, batch, year, phone-optional)
9. System issues JWT (15min) + Refresh Token (7days)
10. Welcome email sent with club discovery link

Edge Cases:
- Duplicate rollNumber â†’ Show "Account exists, try login"
- Invalid OTP 3 times â†’ Lock for 30 minutes
- Email delivery failure â†’ Show support contact
- Session expires during registration â†’ Save progress, resume
1.2 Login Flow
text

Steps:
1. User enters email/rollNumber + password
2. System validates credentials with bcrypt
3. Check account status (active/suspended/locked)
4. Rate limiting: 5 attempts per 15 minutes
5. Progressive delay: 1s, 2s, 4s, 8s, 16s after failures
6. After 10 failed attempts â†’ account locked, email sent
7. Success â†’ Generate tokens, update lastLogin
8. Device fingerprinting for security
9. Optional "Remember Device" for 30 days

Security Features:
- IP tracking for suspicious activity
- New device login â†’ Email notification
- Concurrent session limit: 3 devices
- Force logout on all devices option
1.3 Forgot Password Flow
text

Status: initiated â†’ otp_sent â†’ verified â†’ password_reset

Steps:
1. User clicks "Forgot Password"
2. Enters email OR rollNumber
3. System validates account exists (generic message if not)
4. Generate reset token (UUID) + 6-digit OTP
5. Send email with reset link + OTP
6. Link valid for 15 minutes only
7. User clicks link â†’ Enters OTP + New Password
8. Validate password requirements
9. Update password, invalidate all sessions
10. Send confirmation email
11. 24-hour cooldown before next reset

Security:
- Max 3 reset attempts per day
- Old password cannot be reused (last 3)
- Reset link single-use only
- Log all password changes in audit


2. ROLE-BASED ACCESS CONTROL (RBAC)

Actors: System, All Users
2.1 Global Roles
text

student (default):
  - View all public clubs
  - Apply during recruitment
  - RSVP to events
  - View own profile
  - Upload profile photo

coordinator:
  - All student permissions
  - Approve/reject events for assigned club
  - View member lists
  - Generate reports
  - Override club decisions

admin:
  - All permissions
  - Create/delete clubs
  - Assign coordinators
  - System settings
  - View all audit logs
  - Export NAAC/NBA reports
  - Manage users
2.2 Club-Scoped Roles
text

member:{clubId}:
  - View club internal content
  - RSVP to club events
  - View member directory
  - Participate in discussions

core:{clubId}:{position}:
  Position types: president, vicePresident, secretary, treasurer, leadPR, leadTech
  core team = [secretary, treasurer, leadPR, leadTech, core ]
  - All member permissions
  - Create/edit events
  - Manage recruitment
  - Approve/reject applications
  - Send club notifications
  - Upload media
  - Assign basic roles

leadership:{clubId}:
  leadership team = [president, vicePresident]
  - All core permissions
  - Edit club details
  - Assign all roles
  - Archive club content
  - Financial approvals
2.3 Permission Checking Flow
text

Every API Request:
1. Extract JWT from header
2. Verify token signature & expiry
3. Load user with roles from DB
4. Check endpoint permission requirements
5. For club-scoped: verify clubId + role
6. Allow/Deny with appropriate message
7. Log access attempt if sensitive operation


3. CLUB MANAGEMENT

Actors: Admin, Coordinator, Club-Core, Students
3.1 Club Creation
text

Steps:
1. Admin initiates club creation
2. Enter club details:
   - name (unique, 3-50 chars)
   - category (technical/cultural/sports/arts/social)
   - description (50-500 chars)
   - vision & mission
   - coordinatorId (faculty)
3. Upload club logo (max 2MB, square)
4. Set initial core members (at least president)
5.Club becomes active
6. Welcome email to coordinator & president
3.2 Club Discovery & Info
text

Public View:
- Club name, logo, category
- Description, vision, mission
- Upcoming events
- Recruitment status
- Public achievements
- Member count (not names)
- Social media links

Member View (additional):
- Full member list
- Internal announcements
- Meeting minutes
- Budget status
- Internal resources
3.3 Club Settings Management
text

Editable by President:
- Description, vision, mission
- Social media links
- Club banner/logo
- Recruitment message

Requires Coordinator Approval:
- Club name change
- Category change
- Core member changes
- Budget requests


4. RECRUITMENT SYSTEM

Actors: Club-Core, Students, Coordinator
4.1 Recruitment Lifecycle
text

Status: draft â†’ scheduled â†’ open â†’ closing_soon â†’ closed â†’ selection_done

Steps:
1. President creates recruitment:
   - Title: "Club Name Recruitment 2024"
   - Description & eligibility
   - startDate & endDate (max 14 days)
   - Positions available (optional)
   - Custom questions (max 5)
2. Save as draft for review
3. Core team reviews & schedules
4. System auto-opens at startDate (00:00)
5. Notifications sent to eligible students
6. "closing_soon" status 24hrs before end
7. Auto-close at endDate (23:59)
8. Selection period begins

Notifications:
- On open: Email + In-app to all eligible
- Daily reminder if <100 applications
- 24hr warning before close
- On selection: Individual emails
4.2 Application Process
text

Student Flow:
1. View open recruitments on dashboard
2. Click "Apply" on club card
3. Check eligibility auto-validation
4. Fill application form:
   - Why join? (100-300 words)
   - Relevant skills
   - Previous experience
   - Custom questions
5. Submit (can edit until close)
6. Receive confirmation email
7. Track status: submitted â†’ under_review â†’ selected/rejected/waitlisted

Validation:
- One application per club per cycle
- Must be verified student
- Department/year restrictions if set
- Cannot apply after deadline
4.3 Selection Process
text

Core Team Flow:
1. View applications dashboard
2. Filter/sort by various criteria
3. Bulk actions available:
   - Mark for review
   - Shortlist
   - Reject with reason
4. Individual review with scoring (optional)
5. Final selection meeting
6. Mark selected/waitlisted/rejected
7. System sends notifications
8. Auto-add selected to club members
9. Generate recruitment report

Metrics Tracked:
- Total applications
- Selection rate
- Department-wise distribution
- Gender distribution (optional)
- Average review time


5. EVENT MANAGEMENT

Actors: Club-Core, Coordinator, Admin, Students
5.1 Event Creation & Approval
text

Status: draft â†’ pending_coordinator â†’ pending_admin â†’ approved â†’ published â†’ ongoing â†’ completed â†’ archived

Steps:
1. Core member creates event:
   - name, description, objectives
   - date, time, duration
   - venue (with capacity)
   - expectedAttendees
   - isPublic (all students) or members-only
   - budget (if required)
   - guestSpeakers (if any)
2. Attach documents:
   - Event proposal
   - Budget breakdown
   - Venue permission
3. Submit for approval

Approval Flow:
- Coordinator reviews in 48hrs
- If budget > 5000 â†’ Admin approval needed
- If external guests â†’ Admin approval needed
- If off-campus â†’ Admin + safety approval
- Approved â†’ Published to calendar
- Students can RSVP
5.2 Event Execution
text

Day of Event:
1. Mark event as "ongoing"
2. QR code for attendance
3. Students scan to mark presence
4. Real-time attendance tracking
5. Take photos/videos

Post Event (within 3 days):
1. Upload attendance sheet
2. Upload min 5 photos
3. Submit event report
4. Upload bills (if budget used)
5. Mark as "completed"
6. If missing â†’ reminder emails
7. After 7 days â†’ marked "incomplete"
5.3 Budget Management
text

Budget Request:
1. Create request with amount & breakdown
2. Attach quotations
3. Coordinator reviews & recommends
4. Admin approves if > 5000
5. Finance releases funds

Settlement:
1. Submit all bills within 7 days
2. Upload expense report
3. Return unused funds
4. Coordinator verifies
5. Close budget record


6. NOTIFICATION SYSTEM

Actors: System, All Users
6.1 Notification Types
text

Priority Levels:
- URGENT: Security, account issues
- HIGH: Approvals needed, deadlines
- MEDIUM: Event reminders, updates
- LOW: General announcements

Categories:
- recruitment_open
- recruitment_closing
- application_status
- event_reminder
- approval_required
- role_assigned
- system_maintenance
6.2 Delivery Channels
text

In-App:
- Bell icon with count
- Mark as read/unread
- Filter by category
- Last 30 days visible
- Pagination for older

Email:
- Instant for URGENT
- Batched for others (every 4hrs)
- Unsubscribe link (except URGENT)
- Template-based formatting

Push (Future):
- Browser notifications
- Mobile app notifications
6.3 Queue Management
text

Redis Queue:
1. App adds notification to queue
2. Worker processes every 30 seconds
3. Groups by recipient for batching
4. Sends via appropriate channel
5. Retries on failure (3 attempts)
6. Dead letter queue for failed
7. Daily report of delivery stats


7. MEDIA & DOCUMENTS

Actors: Club-Core, Members, Admin
7.1 Upload Management
text

Allowed Types:
- Images: jpg, png, webp (max 5MB)
- Documents: pdf, docx (max 10MB)
- Videos: mp4 (max 50MB) - via link only

Storage:
- Cloudinary for images
- Cloudinary/Drive for documents
- YouTube/Drive links for videos

Process:
1. Validate file type & size
2. Scan for malware (optional)
3. Compress images if >2MB
4. Generate thumbnail
5. Upload with metadata
6. Return secure URL
7.2 Gallery Management
text

Organization:
- By event
- By year
- By category (photos/documents/videos)

Permissions:
- Public photos (anyone can view)
- Member photos (members only)
- Private (core team only)

Features:
- Bulk upload (max 10 files)
- Tagging members
- Album creation
- Download original option


8. REPORTS & ANALYTICS

Actors: Coordinator, Admin
8.1 Dashboard Metrics
text

Real-time Stats:
- Active clubs count
- Total members
- Events this month
- Pending approvals
- Recruitment status

Charts:
- Member growth trend
- Event participation rate
- Club activity score
- Budget utilization
8.2 Report Generation
text

Available Reports:
1. Club Activity Report
   - Events conducted
   - Member strength
   - Budget used
   - Achievements

2. NAAC/NBA Report
   - Formatted template
   - Auto-populated data
   - Evidence attachments
   - Ready for submission

3. Annual Report
   - All clubs summary
   - Year highlights
   - Statistics
   - Future plans

Export Formats:
- PDF (formatted)
- Excel (raw data)
- CSV (for analysis)
8.3 Audit Logs
text

Tracked Actions:
- User login/logout
- Role changes
- Approvals/rejections
- Budget transactions
- Data exports
- Settings changes
- Failed attempts

Log Format:
- timestamp
- userId
- action
- target
- oldValue/newValue
- IP address
- userAgent

Retention:
- 2 years minimum
- Archived after that
- Immutable storage


9. SEARCH & DISCOVERY

Actors: All Users
9.1 Global Search
text

Searchable:
- Clubs by name/category
- Events by name/date
- Users by name/rollNumber
- Documents by title

Filters:
- Date range
- Category
- Status
- Department

Results:
- Paginated (20 per page)
- Relevance sorted
- Highlighted matches
9.2 Recommendations
text

For Students:
- Clubs based on department
- Similar clubs to joined ones
- Trending clubs
- Friends' clubs

For Clubs:
- Potential members
- Similar events
- Collaboration opportunities


10. SYSTEM ADMINISTRATION

Actors: Admin
10.1 User Management
text

Capabilities:
- View all users
- Edit user details
- Reset passwords
- Suspend/activate accounts
- Assign global roles
- View user activity
- Merge duplicate accounts
- Bulk operations
10.2 System Settings
text

Configurable:
- Recruitment windows
- Budget limits
- File size limits
- Session timeout
- Email templates
- Notification rules
- Maintenance mode
10.3 Backup & Recovery
text

Automated:
- Daily database backup
- Weekly full backup
- Monthly archive
- Point-in-time recovery
- Disaster recovery plan


11. PERFORMANCE & OPTIMIZATION

11.1 Caching Strategy
text

Redis Cache:
- Club listings (5 min)
- User sessions
- Event calendar (10 min)
- Dashboard stats (1 min)
- Search results (30 sec)
11.2 Database Indexes
text

Collections & Indexes:
users: rollNumber, email
clubs: name, category, status
events: date, clubId, status
recruitments: status, endDate
notifications: userId, read, createdAt
11.3 API Optimization
text

Techniques:
- Pagination (default 20)
- Selective field returns
- Gzip compression
- Connection pooling
- Query optimization
- Lazy loading
12. SECURITY MEASURES
12.1 API Security
text

Implementation:
- Rate limiting all endpoints
- Input validation (Joi/Zod)
- SQL injection prevention
- XSS protection
- CORS configuration
- Helmet.js headers
- API versioning
12.2 Data Protection
text

Measures:
- Password hashing (bcrypt)
- JWT signing (RS256)
- Sensitive data encryption
- PII masking in logs
- Secure file uploads
- HTTPS only
